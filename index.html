<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Princess & The Smaumb</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&family=Great+Vibes&family=Indie+Flower&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; background-color: #000; font-family: 'Poppins', sans-serif; height: 100vh; overflow: hidden; color: white; perspective: 1000px; }
        .story-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; transition: opacity 1s; }
        .media-layer { position: absolute; width: 100%; height: 100%; object-fit: cover; z-index: 1; }
        .text-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px 20px 80px 20px; background: linear-gradient(to top, rgba(0,0,0,0.95), transparent); z-index: 10; text-align: center; box-sizing: border-box; }
        h1 { font-family: 'Great Vibes', cursive; color: #ff4d6d; font-size: 2.5rem; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); opacity: 0; animation: fadeUp 1s forwards; }
        p { font-size: 1.1rem; line-height: 1.4; color: #ecf0f1; margin-top: 10px; opacity: 0; animation: fadeUp 1s 0.3s forwards; }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } from { opacity: 0; transform: translateY(20px); } }
        .tap-left, .tap-right { position: absolute; top: 0; height: 100%; width: 50%; z-index: 20; }
        .tap-left { left: 0; } .tap-right { right: 0; }
        .progress-container { position: absolute; top: 10px; left: 5px; right: 5px; display: flex; gap: 4px; z-index: 30; }
        .bar { flex: 1; height: 3px; background: rgba(255,255,255,0.3); border-radius: 2px; }
        .bar-fill { height: 100%; width: 0%; background: white; }
        .btn-group { display: none; position: absolute; bottom: 150px; left: 0; width: 100%; justify-content: center; gap: 20px; z-index: 100; }
        button { padding: 15px 40px; border-radius: 50px; border: none; font-size: 1.2rem; font-weight: bold; box-shadow: 0 5px 20px rgba(0,0,0,0.3); transition: transform 0.2s; cursor: pointer; }
        .yes-btn { background: #ff4d6d; color: white; }
        .no-btn { background: white; color: black; }
        #envelope-stage { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #ffc2d1; z-index: 200; justify-content: center; align-items: center; flex-direction: column; }
        .envelope { position: relative; width: 300px; height: 200px; background: #d90429; box-shadow: 0 10px 30px rgba(0,0,0,0.2); cursor: pointer; transition: transform 0.5s; }
        .flap { position: absolute; top: 0; left: 0; width: 0; height: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-top: 100px solid #ef233c; transform-origin: top; transition: transform 0.6s 0.5s, z-index 0.2s 0.5s; z-index: 5; }
        .flap.open { transform: rotateX(180deg); z-index: 1; }
        .pocket { position: absolute; bottom: 0; left: 0; width: 0; height: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-bottom: 200px solid #d90429; z-index: 3; }
        .seal { position: absolute; top: 80px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; background: gold; border-radius: 50%; z-index: 6; display: flex; align-items: center; justify-content: center; font-size: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.3); transition: opacity 0.5s; }
        .letter { position: absolute; top: 10px; left: 15px; width: 270px; height: 180px; background: white; transition: all 1s 1s; z-index: 2; padding: 20px; box-sizing: border-box; overflow: hidden; display: flex; flex-direction: column; }
        .letter.full-screen { position: fixed; top: 5vh !important; left: 50% !important; transform: translateX(-50%) !important; width: 90% !important; max-width: 500px !important; height: 90vh !important; z-index: 300 !important; box-shadow: 0 0 50px rgba(0,0,0,0.2); overflow-y: auto; border-radius: 5px; }
        .letter-content { opacity: 0; transition: opacity 1s 2s; font-family: 'Indie Flower', cursive; color: #333; font-size: 1.1rem; line-height: 1.6; }
        .letter-content.visible { opacity: 1; }
        .highlight { background: #fff0f3; color: #d90429; font-weight: bold; padding: 0 5px; }
    </style>
</head>
<body>
    <div class="story-container" id="story-container">
        <div class="progress-container" id="bars"></div>
        <div id="media-area"></div>
        <div class="text-overlay"><h1 id="title"></h1><p id="desc"></p></div>
        <div class="btn-group" id="btns">
            <button class="yes-btn" onclick="goNext()">YES ‚ù§Ô∏è</button>
            <button class="no-btn" id="noBtn" onclick="handleNo()">No</button>
        </div>
        <div class="tap-left" onclick="goPrev()"></div>
        <div class="tap-right" onclick="goNext()"></div>
    </div>
    <div id="envelope-stage">
        <h2 style="color: #d90429; margin-bottom: 20px;">A Letter for You...</h2>
        <div class="envelope" onclick="openEnvelope()">
            <div class="flap"></div><div class="pocket"></div><div class="seal" id="seal">‚ù§</div>
            <div class="letter" id="letter">
                <div class="letter-content" id="letter-text">
                    <h1 style="color: #ff4d6d; font-family: 'Great Vibes', cursive; font-size: 2.2rem; margin-top: 0; line-height: 1.2;">To the Girl Who Wears Apple Watches with Ballgowns üëë</h1>
                    <p>
                        Okay, I made a fancy website comparing you to Disney Princesses. But honestly? <b style="color: #d90429;">They are boring compared to you.</b><br><br>
                        Rapunzel wishes she had your hair volume. Cinderella needs a Fairy Godmother; you just need that <span class="highlight">tiny black bindi</span> and some kajal. When you put on those "wings" with your eyeliner, you look dangerous. And that nose ring? It has more power over me than I‚Äôd like to admit.<br><br>
                        We talk about <b>"Smaumb"</b> (Smart + Dumb).<br>
                        üß† <b>I am the Dumb one</b> because I waited <i>years</i> to properly celebrate this day with you.<br>
                        üëë <b>You are the Smart one</b> because you saw past the "Goofy Bear" exterior, saw the potential (and the hidden six-pack üòâ), and decided to stay.<br><br>
                        But here is the truth: <b>I am obsessed with the "Thingari Pilla" version of you.</b><br>
                        Yes, you are a Queen when you dress up. But I love the clumsy, tangled, chaotic version of you just as much. I love that you are a "Boss Lady" one minute and a confused teddy bear the next.<br><br>
                        <span class="highlight">We have waited SO long for this.</span><br>
                        I used to look at my phone screen wishing I could reach through it. Now? I can hold the real hour-glass perfection that is you.<br><br>
                        <b>You changed the definition of "Love" for me.</b><br>
                        Before you, love was just a word. Now, love is patience. Love is waiting. Love is noticing the "tiniest things"‚Äîlike the specific way you raise one eyebrow, or that white saree. (By the way, that wasn't just an outfit. That was an assassination attempt on my heart. üíÄ‚ù§Ô∏è)<br><br>
                        Thank you for being my peace, my panic, and my paradise. I promise to always be your "Smaumb"‚Äîdumb enough to make you laugh, but smart enough to never let you go.<br><br>
                        <b>Happy First Valentine's Day, My Love. ‚ù§Ô∏è</b><br><br>
                        <i>- Forever Your Bear</i>
                    </p>
                    <img src="15_kiss.gif" style="width: 100%; border-radius: 10px; border: 3px solid #ff4d6d; margin-top: 10px;">
                </div>
            </div>
        </div>
    </div>
    <script>
        // UPDATED: All images are now .png!
        const story = [
            { type: 'img', src: '01_book.png', title: "The Smaumb Story", text: "I thought fairytales were just movies... until I met you." },
            { type: 'img', src: '02_akhila.png', title: "Her Highness", text: "Meet Akhila. Not just a girl, but a Queen. Wearing a Maroon Ballgown like royalty, but with an Apple Watch because she's a Boss Lady." },
            { type: 'img', src: '03_eyes.png', title: "Those Eyes...", text: "The Kajal. The Bindi. The Shape. I could get lost in them forever. (And trust me, I have.)" },
            { type: 'img', src: '04_hair.png', title: "Rapunzel Vibes", text: "Long, thick, and absolutely stunning. You don't need magic hair to enchant me, you already have it." },
            { type: 'img', src: '05_moana.png', title: "The Spirit", text: "You have the bravery of Moana. You face every wave in life with a fire that inspires me every day." },
            { type: 'img', src: '06_belle.png', title: "The Brains", text: "You are the 'Smart' in our 'Smaumb' duo. Witty, intelligent, and always keeping me on my toes." },
            { type: 'img', src: '07_tangled.png', title: "The 'Thingari Pilla'", text: "But you're also my clumsy Tangled princess. Tripping over things but looking cute doing it." },
            { type: 'vid', src: '08_saree.mp4', title: "Real Life Magic", text: "And then... you wear a white saree and realize Cinderella has NOTHING on you. You just woke up and chose violence." },
            { type: 'img', src: '09_bear.png', title: "And Then Me...", text: "The Chubby Bear. (Note: The six-pack is there, it's just shy and hiding under the fur. Trust me.)" },
            { type: 'img', src: '10_smaumb.png', title: "Us.", text: "Smart + Dumb = Smaumb. The Perfect Princess and the Goofy Bear. It makes no sense, but it's perfect." },
            { type: 'img', src: '11_ask.png', title: "So...", text: "Since I waited till the last minute (dumb) to ask the girl of my dreams (smart)...", interactive: true },
            { type: 'img', src: '14_happy.gif', title: "SHE SAID YES! üéâ", text: "I knew it! (Okay, I forced you, but still!) You made me the happiest bear alive." },
            { type: 'end' }
        ];

        let index = 0;
        let rejectCount = 0;
        const mediaArea = document.getElementById('media-area');
        const title = document.getElementById('title');
        const desc = document.getElementById('desc');
        const bars = document.getElementById('bars');
        const btns = document.getElementById('btns');
        story.forEach((_, i) => { if(story[i].type !== 'end') bars.innerHTML += `<div class="bar"><div class="bar-fill" id="fill-${i}"></div></div>`; });
        loadSlide(0);

        function loadSlide(i) {
            if (story[i].type === 'end') {
                document.getElementById('story-container').style.opacity = '0';
                setTimeout(() => { document.getElementById('story-container').style.display = 'none'; document.getElementById('envelope-stage').style.display = 'flex'; }, 1000);
                return;
            }
            let html = '';
            if (story[i].type === 'vid') { html = `<video class="media-layer" src="${story[i].src}" autoplay loop muted playsinline></video>`; } 
            else { html = `<img class="media-layer" src="${story[i].src}">`; }
            mediaArea.innerHTML = html;
            title.innerText = story[i].title; desc.innerText = story[i].text;
            title.style.animation = 'none'; title.offsetHeight; title.style.animation = 'fadeUp 1s forwards';
            desc.style.animation = 'none'; desc.offsetHeight; desc.style.animation = 'fadeUp 1s 0.3s forwards';
            if (story[i].interactive) { btns.style.display = 'flex'; document.querySelector('.tap-right').style.pointerEvents = 'none'; } 
            else { btns.style.display = 'none'; document.querySelector('.tap-right').style.pointerEvents = 'auto'; }
            for (let j = 0; j < story.length - 1; j++) { document.getElementById(`fill-${j}`).style.width = (j <= i) ? '100%' : '0%'; }
        }
        function goNext() { if (index < story.length - 1) { index++; loadSlide(index); } }
        function goPrev() { if (index > 0) { index--; loadSlide(index); } }
        function handleNo() {
            rejectCount++;
            const img = document.querySelector('img');
            const btn = document.getElementById('noBtn');
            // NOTE: I am using the PNG files for shock/cry here
            if (rejectCount === 1) { img.src = '12_shock.png'; title.innerText = "Wait... What?!"; desc.innerText = "Is it the chubby cheeks? I'm working on them!"; btn.innerText = "Still No"; } 
            else if (rejectCount === 2) { img.src = '13_cry.png'; title.innerText = "Don't Break My Heart! üíî"; desc.innerText = "I promise to be less dumb! Please!"; btn.innerText = "Don't Care"; } 
            else { btn.style.position = 'fixed'; btn.style.left = Math.random() * (window.innerWidth - 100) + 'px'; btn.style.top = Math.random() * (window.innerHeight - 100) + 'px'; }
        }
        function openEnvelope() {
            document.querySelector('.flap').classList.add('open');
            document.getElementById('seal').style.opacity = '0';
            setTimeout(() => {
                const letter = document.getElementById('letter');
                letter.classList.add('full-screen');
                setTimeout(() => { document.querySelector('.letter-content').classList.add('visible'); }, 1000);
            }, 1000);
        }
    </script>
</body>
</html>