<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Princess & The Smaumb</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&family=Great+Vibes&family=Indie+Flower&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; background-color: #000; font-family: 'Poppins', sans-serif; height: 100vh; width: 100vw; overflow: hidden; color: white; -webkit-font-smoothing: antialiased; }
        .story-container { position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        
        /* FIX: Forces video and images to center and fit perfectly on iPad */
        .media-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; }
        .media-layer.contain { object-fit: contain; background: #000; } /* For GIFs that shouldn't stretch */

        .text-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 40px 20px 80px 20px; background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 60%, transparent 100%); z-index: 10; text-align: center; box-sizing: border-box; }
        
        h1 { font-family: 'Great Vibes', cursive; color: #ff4d6d; font-size: 2.8rem; margin: 0; text-shadow: 2px 2px 8px rgba(0,0,0,1); }
        p { font-size: 1.1rem; line-height: 1.4; color: #f1f1f1; margin-top: 8px; text-shadow: 1px 1px 4px rgba(0,0,0,1); }

        /* BUTTONS: Larger and easier to tap on iPad */
        .btn-group { display: none; position: absolute; bottom: 180px; left: 0; width: 100%; justify-content: center; gap: 20px; z-index: 100; }
        button { padding: 16px 40px; border-radius: 50px; border: none; font-size: 1.3rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .yes-btn { background: #ff4d6d; color: white; }
        .no-btn { background: white; color: black; transition: transform 0.1s; }

        /* ENVELOPE & LETTER: High contrast and iPad centering */
        #envelope-stage { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #ffc2d1; z-index: 200; justify-content: center; align-items: center; flex-direction: column; }
        .envelope { width: 300px; height: 200px; background: #d90429; position: relative; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .flap { position: absolute; top: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-top: 100px solid #ef233c; transform-origin: top; transition: transform 0.6s; z-index: 5; }
        .flap.open { transform: rotateX(180deg); }
        .pocket { position: absolute; bottom: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-bottom: 200px solid #d90429; z-index: 4; }
        
        .letter { position: absolute; top: 10px; left: 10px; width: 280px; height: 180px; background: #fffdf5; padding: 20px; box-sizing: border-box; z-index: 2; transition: all 1s ease-in-out; border-radius: 5px; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
        .letter.full-screen { position: fixed; top: 5% !important; left: 5% !important; width: 90% !important; height: 90% !important; z-index: 300 !important; overflow-y: auto; padding: 40px 30px; }
        
        .letter-content { opacity: 0; font-family: 'Indie Flower', cursive; color: #1a1a1a; font-size: 1.3rem; line-height: 1.6; visibility: hidden; }
        .letter-content.visible { opacity: 1; visibility: visible; }
        .letter-content h2 { color: #d90429; font-size: 2.2rem; margin-top: 0; font-family: 'Great Vibes', cursive; }

        .progress-container { position: absolute; top: 15px; left: 10px; right: 10px; display: flex; gap: 5px; z-index: 50; }
        .bar { flex: 1; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; overflow: hidden; }
        .bar-fill { height: 100%; width: 0%; background: #ff4d6d; transition: width 0.3s; }
        
        .tap-zone { position: absolute; top: 0; height: 100%; width: 50%; z-index: 20; }
        .tap-left { left: 0; } .tap-right { right: 0; }
        .tap-hint { position: absolute; bottom: 20px; width: 100%; text-align: center; font-size: 0.8rem; opacity: 0.5; z-index: 5; }
    </style>
</head>
<body>
    <div class="story-container" id="story-container">
        <div class="progress-container" id="bars"></div>
        <div id="media-area"></div>
        <div class="text-overlay"><h1 id="title"></h1><p id="desc"></p></div>
        <div class="btn-group" id="btns">
            <button class="yes-btn" onclick="goNext()">YES ‚ù§Ô∏è</button>
            <button class="no-btn" id="noBtn" ontouchstart="handleNo()" onclick="handleNo()">No</button>
        </div>
        <div class="tap-zone tap-left" onclick="goPrev()"></div>
        <div class="tap-zone tap-right" onclick="goNext()"></div>
        <div class="tap-hint">Tap left to go back | Tap right to continue</div>
    </div>

    <div id="envelope-stage">
        <h2 style="color: #d90429; font-family: 'Great Vibes', cursive; font-size: 2rem;">A special letter for you...</h2>
        <div class="envelope" onclick="openEnvelope()">
            <div class="flap"></div><div class="pocket"></div>
            <div class="letter" id="letter">
                <div class="letter-content" id="letter-text">
                    <h2>To My Queen, Akhila üëë</h2>
                    <p>
                        I thought fairytales were just stories until I met the girl who wears <b>Apple Watches with Ballgowns</b>. <br><br>
                        Disney has Moana and Rapunzel, but they don't have that <b>tiny black bindi</b> or the way your kajal wings make my heart stop. And the white saree? That was just an assassination attempt on my soul. ‚ù§Ô∏è<br><br>
                        We are "Smaumb"‚Äîthe smart princess and the goofy bear. I'm so lucky you chose to stay with this bear. <br><br>
                        <b>Happy Valentine's Day, My Love. ‚ù§Ô∏è</b>
                    </p>
                    <img src="15_kiss.gif" style="width: 100%; border-radius: 10px; margin-top: 20px;">
                </div>
            </div>
        </div>
    </div>

    <script>
        const story = [
            { src: '01_book.png', title: "The Smaumb Story", text: "Fairytales were just movies... until I met you." },
            { src: '02_akhila.png', title: "Her Highness", text: "The Queen wearing a Ballgown and an Apple Watch. A total Boss Lady." },
            { src: '03_eyes.png', title: "Those Eyes...", text: "The Kajal. The Bindi. The Shape. I could get lost in them forever." },
            { src: '04_hair.png', title: "Rapunzel Vibes", text: "Long, thick, and absolutely stunning. You are enchanting." },
            { src: '05_moana.png', title: "The Spirit", text: "You have the bravery of Moana, facing every wave with fire." },
            { src: '06_belle.png', title: "The Brains", text: "The 'Smart' in our 'Smaumb' duo. Witty and intelligent." },
            { src: '07_tangled.png', title: "The 'Thingari Pilla'", text: "My clumsy Tangled princess. Cute even when you trip." },
            { src: '08_saree.mp4', title: "Real Life Magic", text: "Then the white saree happens... and Cinderella has NOTHING on you.", type: 'vid' },
            { src: '09_bear.png', title: "And Then Me...", text: "The Chubby Bear. (The abs are hiding, I promise.)" },
            { src: '10_smaumb.png', title: "Us.", text: "Smart + Dumb = Smaumb. It's perfectly us." },
            { src: '11_ask.png', title: "One Question...", text: "Will you be my Valentine?", ask: true },
            { src: '14_happy.gif', title: "YES! üéâ", text: "I'm the luckiest bear in the world.", type: 'gif' },
            { end: true }
        ];

        let index = 0;
        const mediaArea = document.getElementById('media-area');
        const title = document.getElementById('title');
        const desc = document.getElementById('desc');
        const bars = document.getElementById('bars');
        const btns = document.getElementById('btns');

        story.forEach((_, i) => { if(!story[i].end) bars.innerHTML += `<div class="bar"><div class="bar-fill" id="fill-${i}"></div></div>`; });

        function loadSlide(i) {
            if (story[i].end) {
                document.getElementById('story-container').style.display = 'none';
                document.getElementById('envelope-stage').style.display = 'flex';
                return;
            }
            
            let content = '';
            if (story[i].type === 'vid') {
                content = `<video class="media-layer" src="${story[i].src}" autoplay loop muted playsinline></video>`;
            } else if (story[i].type === 'gif') {
                content = `<img class="media-layer contain" src="${story[i].src}">`;
            } else {
                content = `<img class="media-layer" src="${story[i].src}">`;
            }
            
            mediaArea.innerHTML = content;
            title.innerText = story[i].title;
            desc.innerText = story[i].text;
            
            btns.style.display = story[i].ask ? 'flex' : 'none';
            document.querySelector('.tap-right').style.pointerEvents = story[i].ask ? 'none' : 'auto';
            
            for (let j = 0; j < story.length - 1; j++) {
                document.getElementById(`fill-${j}`).style.width = (j <= i) ? '100%' : '0%';
            }
        }

        function goNext() { if (index < story.length - 1) { index++; loadSlide(index); } }
        function goPrev() { if (index > 0) { index--; loadSlide(index); } }

        function handleNo() {
            const btn = document.getElementById('noBtn');
            btn.style.position = 'fixed';
            btn.style.left = Math.random() * 60 + 20 + '%';
            btn.style.top = Math.random() * 60 + 20 + '%';
        }

        function openEnvelope() {
            document.querySelector('.flap').classList.add('open');
            setTimeout(() => {
                const letter = document.getElementById('letter');
                letter.classList.add('full-screen');
                setTimeout(() => { document.getElementById('letter-text').classList.add('visible'); }, 800);
            }, 600);
        }

        loadSlide(0);
    </script>
</body>
</html>