<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Princess & The Smaumb</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Great+Vibes&family=Indie+Flower&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; background-color: #000; font-family: 'Poppins', sans-serif; height: 100vh; width: 100vw; overflow: hidden; color: white; -webkit-font-smoothing: antialiased; }
        .story-container { position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        
        /* IPAD FIX: Forces video and images to cover the screen */
        .media-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; }
        .media-layer.contain { object-fit: contain; background: #000; } /* For GIFs */

        /* TEXT OVERLAY - Adjusted to move text higher up */
        .text-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 30px 20px 150px 20px; background: linear-gradient(to top, rgba(0,0,0,0.95) 10%, rgba(0,0,0,0.7) 50%, transparent 100%); z-index: 10; text-align: center; box-sizing: border-box; }
        
        h1 { font-family: 'Great Vibes', cursive; color: #ff4d6d; font-size: 3.2rem; margin: 0 0 10px 0; text-shadow: 3px 3px 8px rgba(0,0,0,1); line-height: 1.1; }
        p { font-size: 1.2rem; line-height: 1.5; color: #f1f1f1; margin-top: 5px; text-shadow: 2px 2px 5px rgba(0,0,0,1); font-weight: 400; }

        /* BUTTONS - Moved up slightly */
        .btn-group { display: none; position: absolute; bottom: 130px; left: 0; width: 100%; justify-content: center; gap: 25px; z-index: 100; }
        button { padding: 18px 45px; border-radius: 50px; border: none; font-size: 1.4rem; font-weight: bold; cursor: pointer; box-shadow: 0 6px 20px rgba(0,0,0,0.6); transition: transform 0.2s; }
        button:active { transform: scale(0.95); }
        .yes-btn { background: #ff4d6d; color: white; }
        .no-btn { background: white; color: black; transition: all 0.3s ease; }

        /* ENVELOPE STAGE */
        #envelope-stage { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #ffc2d1; z-index: 200; justify-content: center; align-items: center; flex-direction: column; }
        
        /* THE ENVELOPE */
        .envelope { width: 300px; height: 200px; background: #d90429; position: relative; cursor: pointer; box-shadow: 0 15px 35px rgba(0,0,0,0.4); transition: transform 0.3s; }
        .envelope:hover { transform: scale(1.02); }
        .flap { position: absolute; top: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-top: 100px solid #ef233c; transform-origin: top; transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1); z-index: 5; }
        .flap.open { transform: rotateX(180deg); }
        .pocket { position: absolute; bottom: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-bottom: 200px solid #d90429; z-index: 4; }
        
        /* THE LETTER - Initial State */
        .letter { position: absolute; top: 10px; left: 10px; width: 280px; height: 180px; background: #f8f4e6; /* Creamy parchment */ padding: 20px; box-sizing: border-box; z-index: 2; transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1); border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        
        /* THE LETTER - Full Screen State (Polished Graphics) */
        .letter.full-screen { position: fixed; top: 30px !important; left: 50% !important; transform: translateX(-50%) !important; width: 85% !important; max-width: 550px; height: 85vh !important; z-index: 300 !important; overflow-y: auto; padding: 40px 35px; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); border: 3px solid #d4c5b9; }
        
        /* LETTER CONTENT (Fixed White Font Issue) */
        .letter-content { opacity: 0; font-family: 'Indie Flower', cursive; color: #2c2c2c; /* Dark charcoal text */ font-size: 1.25rem; line-height: 1.7; visibility: hidden; text-align: left; }
        .letter-content.visible { opacity: 1; visibility: visible; transition: opacity 1.5s ease 0.5s; }
        .letter-content h2 { color: #d90429; font-size: 2.4rem; margin-top: 0; font-family: 'Great Vibes', cursive; text-align: center; margin-bottom: 25px; line-height: 1.2; }
        .letter-content b { color: #d90429; font-weight: 600; }
        
        /* FIX FOR LETTER GIF */
        .letter-gif { width: 100%; height: auto; max-height: 200px; object-fit: contain; border-radius: 10px; margin-top: 25px; border: 2px solid #ff4d6d; }

        .progress-container { position: absolute; top: 15px; left: 10px; right: 10px; display: flex; gap: 4px; z-index: 50; }
        .bar { flex: 1; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px; overflow: hidden; }
        .bar-fill { height: 100%; width: 0%; background: #ff4d6d; transition: width 0.3s; }
        
        .tap-zone { position: absolute; top: 0; height: 100%; width: 50%; z-index: 20; }
        .tap-left { left: 0; } .tap-right { right: 0; }
    </style>
</head>
<body>
    <div class="story-container" id="story-container">
        <div class="progress-container" id="bars"></div>
        <div id="media-area"></div>
        <div class="text-overlay"><h1 id="title"></h1><p id="desc"></p></div>
        <div class="btn-group" id="btns">
            <button class="yes-btn" onclick="goNext()">YES ‚ù§Ô∏è</button>
            <button class="no-btn" id="noBtn" ontouchstart="handleNo()" onmouseover="handleNo()" onclick="handleNo()">No</button>
        </div>
        <div class="tap-zone tap-left" onclick="goPrev()"></div>
        <div class="tap-zone tap-right" onclick="goNext()"></div>
    </div>

    <div id="envelope-stage">
        <h2 style="color: #d90429; font-family: 'Great Vibes', cursive; font-size: 2.5rem; margin-bottom: 30px; text-shadow: 1px 1px 4px rgba(255,255,255,0.5);">For My Real-Life Princess</h2>
        <div class="envelope" onclick="openEnvelope()">
            <div class="flap"></div><div class="pocket"></div>
            <div class="letter" id="letter">
                <div class="letter-content" id="letter-text">
                    <h2>To My Real-Life Disney Princess,</h2>
                    <p>
                        They say you have to kiss a lot of frogs to find your prince. In your case, you found a Bear‚Äîa <b>"Smaumb" Bear</b> who is smart enough to choose you, but dumb enough to wait until the very last second to tell you how much.<br><br>
                        Akhila, growing up you watched all those movies about magic and glass slippers. But watching you... that‚Äôs the real magic.<br><br>
                        You have <b>Moana's bravery</b> when life gets tough. You have <b>Belle's intelligence</b> when you handle the world (and me). You have <b>Rapunzel's light</b> that glows even on my darkest days. And when you wore that white saree? Yeah, Cinderella has nothing on you. You just woke up and chose violence.<br><br>
                        It‚Äôs crazy to think about "all these years" leading up to this moment. We‚Äôve waited so long for this‚Äîour First Valentine‚Äôs Day where I can actually look into your big, beautiful eyes instead of a screen. Where I can be with you.<br><br>
                        I want to tell you something I don't say enough: <b>You changed me.</b><br><br>
                        Before you, I was just... me. But loving you made me want to be better. You‚Äôve taught me patience (mostly by making me wait!), kindness, and what it truly means to value the "tiniest things"‚Äîlike a rose in your hair or a smile on your face. You turned me into the man I am today, just by being who you are.<br><br>
                        I know I‚Äôm not Prince Charming. I‚Äôm the guy who trips, forgets things, and panics. But I am also the guy who will always, always hold your hand when the clock strikes twelve.<br><br>
                        Thank you for accepting me (even when I'm an idiot).<br><br>
                        I love you, Akhila. Happy Valentine's Day. ‚ù§Ô∏è<br><br>
                        <i>Forever Yours,<br>Your Smaumb</i>
                    </p>
                    <img class="letter-gif" src="15_kiss.gif">
                </div>
            </div>
        </div>
    </div>

    <script>
        const story = [
            { src: '01_book.png', title: "The Smaumb Story", text: "I thought fairytales were just movies... until I met you." },
            { src: '02_akhila.png', title: "Her Highness", text: "Meet Akhila. Not just a girl, but a Queen. Wearing a Maroon Ballgown like royalty, but with an Apple Watch because she's a Boss Lady." },
            { src: '03_eyes.png', title: "Those Eyes...", text: "The Kajal. The Bindi. The Shape. I could get lost in them forever. (And trust me, I have.)" },
            { src: '04_hair.png', title: "Rapunzel Vibes", text: "Long, thick, and absolutely stunning. You don't need magic hair to enchant me, you already have it." },
            { src: '05_moana.png', title: "The Spirit", text: "You have the bravery of Moana. You face every wave in life with a fire that inspires me every day." },
            { src: '06_belle.png', title: "The Brains", text: "You are the 'Smart' in our 'Smaumb' duo. Witty, intelligent, and always keeping me on my toes." },
            { src: '07_tangled.png', title: "The 'Thingari Pilla'", text: "But you're also my clumsy Tangled princess. Tripping over things but looking cute doing it." },
            { src: '08_saree.mp4', title: "Real Life Magic", text: "And then... you wear a white saree and realize Cinderella has NOTHING on you. You just woke up and chose violence.", type: 'vid' },
            // UPDATED SIX-PACK TEXT
            { src: '09_bear.png', title: "And Then Me...", text: "The Chubby Bear. (Ignore the six-pack, I'm definitely not flaunting it. üòâ)" },
            { src: '10_smaumb.png', title: "The Duo", text: "Smart + Dumb = Smaumb. The Perfect Princess and the Goofy Bear. It makes no sense, but it's perfect." },
            // MOVED UP TITLE
            { src: '11_ask.png', title: "Will You Be My Valentine?", text: "So... Since I waited till the last minute (dumb) to ask the girl of my dreams (smart)...", ask: true },
            { src: '14_happy.gif', title: "SHE SAID YES! üéâ", text: "Best. Valentine. Ever.", type: 'gif' },
            { end: true }
        ];

        let index = 0;
        let rejectCount = 0;
        const mediaArea = document.getElementById('media-area');
        const title = document.getElementById('title');
        const desc = document.getElementById('desc');
        const bars = document.getElementById('bars');
        const btns = document.getElementById('btns');

        story.forEach((_, i) => { if(!story[i].end) bars.innerHTML += `<div class="bar"><div class="bar-fill" id="fill-${i}"></div></div>`; });

        function loadSlide(i) {
            if (story[i].end) {
                document.getElementById('story-container').style.display = 'none';
                document.getElementById('envelope-stage').style.display = 'flex';
                return;
            }
            
            let content = '';
            if (story[i].type === 'vid') {
                content = `<video class="media-layer" src="${story[i].src}" autoplay loop muted playsinline></video>`;
            } else if (story[i].type === 'gif') {
                content = `<img class="media-layer contain" src="${story[i].src}">`;
            } else {
                content = `<img class="media-layer" src="${story[i].src}">`;
            }
            
            mediaArea.innerHTML = content;
            title.innerText = story[i].title;
            desc.innerText = story[i].text;
            
            if (story[i].ask) {
                btns.style.display = 'flex';
                document.querySelector('.tap-right').style.pointerEvents = 'none';
            } else {
                btns.style.display = 'none';
                document.querySelector('.tap-right').style.pointerEvents = 'auto';
            }
            
            for (let j = 0; j < story.length - 1; j++) {
                document.getElementById(`fill-${j}`).style.width = (j <= i) ? '100%' : '0%';
            }
        }

        function goNext() { if (index < story.length - 1) { index++; loadSlide(index); } }
        function goPrev() { if (index > 0) { index--; loadSlide(index); } }

        function handleNo() {
            rejectCount++;
            const noBtn = document.getElementById('noBtn');
            
            if (rejectCount === 1) {
                mediaArea.innerHTML = `<img class="media-layer" src="12_shock.png">`;
                title.innerText = "Wait... What?!";
                // UPDATED CHUBBY CHEEKS TEXT
                desc.innerText = "Is it because I'm irresponsible? I can change!";
                noBtn.innerText = "Still No";
            } else if (rejectCount === 2) {
                mediaArea.innerHTML = `<img class="media-layer" src="13_cry.png">`;
                title.innerText = "Don't Break My Heart! üíî";
                desc.innerText = "I promise to be less dumb! Please!";
                noBtn.innerText = "Don't Care";
            } else {
                noBtn.style.position = 'fixed';
                // Ensure button stays within easier reach on iPad
                noBtn.style.left = Math.random() * 50 + 25 + '%'; 
                noBtn.style.top = Math.random() * 50 + 25 + '%';
            }
        }

        function openEnvelope() {
            document.querySelector('.flap').classList.add('open');
            setTimeout(() => {
                const letter = document.getElementById('letter');
                letter.classList.add('full-screen');
                setTimeout(() => { document.getElementById('letter-text').classList.add('visible'); }, 800);
            }, 600);
        }

        loadSlide(0);
    </script>
</body>
</html>